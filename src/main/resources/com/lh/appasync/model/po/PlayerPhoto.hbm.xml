<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<!-- 
    Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
    <class name="com.lh.appasync.model.po.PlayerPhoto" table="player_photo" schema="">
        <id name="uid">
            <column name="uid" sql-type="varchar" length="36" not-null="true"/>
        </id>
        <property name="createdBy" type="java.lang.String">
            <column name="created_by" length="36">
            </column>
        </property>
        <property name="createdDate" type="java.sql.Timestamp">
            <column name="created_date" length="0" not-null="true">
            </column>
        </property>
        <property name="lastModifiedBy" type="java.lang.String">
            <column name="last_modified_by" length="36">
            </column>
        </property>
        <property name="lastModifiedDate" type="java.sql.Timestamp">
            <column name="last_modified_date" length="0" not-null="true">
            </column>
        </property>
        <property name="deletedBy" type="java.lang.String">
            <column name="deleted_by" length="36">
            </column>
        </property>
        <property name="deletedDate" type="java.sql.Timestamp">
            <column name="deleted_date" length="0" not-null="true">
            </column>
        </property>
        <property name="deletedFlag" type="java.lang.Short">
            <column name="deleted_flag">
            <comment>0使用1删除</comment>
            </column>
        </property>
        <property name="photoName" type="java.lang.String">
            <column name="photo_name">
            </column>
        </property>
        <property name="photoAlbumId" type="java.lang.String">
            <column name="photo_album_id" length="36">
            </column>
        </property>
        <property name="photoPath" type="java.lang.String">
            <column name="photo_path" length="128">
            </column>
        </property>
        <property name="auditStatus" type="java.lang.Integer">
            <column name="audit_status">
            </column>
        </property>
        <property name="remarks" type="java.lang.String">
            <column name="remarks" length="65535" />
        </property>
        <property name="commentCount" type="java.lang.Integer">
            <column name="comment_count">
            </column>
        </property>
        <property name="shareCount" type="java.lang.Integer">
            <column name="share_count">
            </column>
        </property>
        <property name="browseCount" type="java.lang.Integer">
            <column name="browse_count">
            </column>
        </property>
        <property name="isTop" type="java.lang.Integer">
            <column name="isTop">
            <comment>是否主页轮播0是1否</comment>
            </column>
        </property>
        <property name="giftCount" type="java.lang.Integer">
            <column name="gift_count">
            </column>
        </property>
        <property name="praiseCount" type="java.lang.Integer">
            <column name="praise_count">
            </column>
        </property>
        <property name="isHeadImg" type="java.lang.Integer">
            <column name="is_head_img">
            <comment>1:是头像；0:不是头像</comment>
            </column>
        </property>
    </class>
    
	<!-- 更新评论数 -->
	<sql-query name="PlayerPhoto.UpdateCommentCount">
	    <![CDATA[
			UPDATE player_photo AS tab1 LEFT JOIN player_trends_history AS tab2 ON tab1.uid = tab2.trends_id AND tab2.trends_type IN(:type)
			 		LEFT JOIN player_photo_album AS tab3 on tab1.photo_album_id=tab3.uid 
					LEFT JOIN player AS tab4 ON tab4.uid = tab3.player_id
    			  SET tab1.comment_count = tab1.comment_count + :num,tab2.comment_count = tab1.comment_count WHERE tab1.uid =:uid
		]]>
	</sql-query>
	
</hibernate-mapping>
