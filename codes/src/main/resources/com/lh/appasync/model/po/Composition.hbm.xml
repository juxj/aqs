<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<!-- 
    Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
    <class name="com.lh.appasync.model.po.Composition" table="composition" schema="">
        <id name="uid">
            <column name="uid" sql-type="varchar" length="36" not-null="true"/>
        </id>
        <property name="playerId" type="java.lang.String">
            <column name="player_id" length="36" />
        </property>
        <property name="playerNickName" type="java.lang.String">
            <column name="player_nick_name" length="64" />
        </property>
        <property name="songId" type="java.lang.String">
            <column name="song_id" length="36" />
        </property>
        <property name="songName" type="java.lang.String">
            <column name="song_name"/>
        </property>
        <property name="uploadDate" type="java.sql.Timestamp">
            <column name="upload_date" length="0" not-null="true" />
        </property>
        <property name="playedTimes" type="java.lang.Integer">
            <column name="played_times" />
        </property>
        <property name="sharedTimes" type="java.lang.Integer">
            <column name="shared_times" />
        </property>
        <property name="listenTimes" type="java.lang.Integer">
            <column name="listen_times" />
        </property>
        <property name="likeCount" type="java.lang.Integer">
            <column name="like_count" />
        </property>
        <property name="collected" type="java.lang.Integer">
            <column name="collected" />
        </property>
        <property name="rank" type="java.lang.Integer">
            <column name="rank" />
        </property>
        <property name="score" type="java.lang.Double">
            <column name="score" precision="22" scale="0">
            </column>
        </property>
        <property name="path" type="java.lang.String">
            <column name="path" length="256" />
        </property>
        <property name="mediaType" type="java.lang.String">
            <column name="media_type" length="16" />
        </property>
        <property name="online" type="java.lang.Short">
            <column name="online" />
        </property>
        <property name="remark" type="java.lang.String">
            <column name="remark" />
        </property>
        <property name="deletedBy">
            <column name="deleted_by" sql-type="varchar" length="36"/>
        </property>
        <property name="deletedDate">
            <column name="deleted_date" sql-type="timestamp" length="19"/>
        </property>
        <property name="deletedFlag">
            <column name="deleted_flag" sql-type="tinyint" length="3"/>
        </property>
        <property name="expirationTime">
            <column name="expiration_time" sql-type="timestamp" length="19"/>
        </property>
        <property name="auditStatus" type="java.lang.Integer">
            <column name="audit_status">
            </column>
        </property>
        <property name="commentCount" type="java.lang.Integer">
            <column name="comment_count">
            </column>
        </property>
        <property name="rankCommentCount" type="java.lang.Integer">
            <column name="rank_comment_count">
            </column>
        </property>
        <property name="compositionTags">
            <column name="composition_tags" sql-type="varchar" length="256"/>
        </property>
        <property name="isShare" type="java.lang.Integer">
            <column name="is_share">
            <comment>1:已分享;0:未分享</comment>
            </column>
        </property>
        <property name="deviceDetail">
            <column name="device_detail" sql-type="varchar" length="256"/>
        </property>
        <property name="giftCount" type="java.lang.Integer">
            <column name="gift_count">
            </column>
        </property>
        <property name="praiseCount" type="java.lang.Integer">
            <column name="praise_count">
            </column>
        </property>
        <property name="isCar" type="java.lang.Integer">
            <column name="is_car">
            </column>
        </property>
        <property name="city" type="java.lang.String">
            <column name="city">
            </column>
        </property>
        <property name="isTop"  type="java.lang.Integer">
            <column name="is_top">
            </column>
        </property>
        <property name="frontCover" type="java.lang.String">
            <column name="front_cover">
            </column>
        </property>
        <property name="activityTags" type="java.lang.String">
            <column name="activity_tags">
            </column>
        </property>
        <property name="audioPath" type="java.lang.String">
            <column name="audio_path">
            </column>
        </property>
        <property name="transcoderStatus"  type="java.lang.Integer">
            <column name="transcoder_status">
            <comment>-1:未转码;0:成功;1:失败;2:转码中(只记音频)</comment>
            </column>
        </property>
    </class>
    
   	<!-- 更新评论数 -->
	<sql-query name="Composition.UpdateCommentCount">
	    <![CDATA[
	        UPDATE composition AS tab1 LEFT JOIN player_trends_history AS tab2 ON tab1.uid =  tab2.trends_id AND tab2.trends_type IN(:type)  
      			  SET tab1.comment_count = tab1.comment_count + :num,tab2.comment_count = tab1.comment_count WHERE tab1.uid = :uid
		]]>
	</sql-query>
</hibernate-mapping>
